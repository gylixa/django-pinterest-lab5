{% extends 'base.html' %}
{% load static %}

{% block title %}–ü—Ä–æ–µ–∫—Ç—ã –∏ –∫–æ—Ä–ø—É—Å–∞{% endblock %}

{% block extra_css %}
<style>
    table { color: white; border-collapse: collapse; }
    th, td { text-align: left; }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1>üèóÔ∏è –ü—Ä–æ–µ–∫—Ç—ã –∏ –∫–æ—Ä–ø—É—Å–∞</h1>

    {% for project in projects %}
    <div class="project-card">
        <h2 class="project-title">{{ project.name }}</h2>
        <p class="project-meta"><strong>–ì–æ—Ä–æ–¥:</strong> {{ project.city }}</p>
        {% if project.description %}
            <p class="project-meta"><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ project.description }}</p>
        {% endif %}

        {% if project.buildings.exists %}
            <h3>–ö–æ—Ä–ø—É—Å–∞:</h3>
            <table>
                <thead>
                    <tr>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–≠—Ç–∞–∂–∏</th>
                        <th>–ö–≤–∞—Ä—Ç–∏—Ä</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</th>
                    </tr>
                </thead>
                <tbody>
                    {% for building in project.buildings.all %}
                    <tr>
                        <td>{{ building.name }}</td>
                        <td>{{ building.floors }}</td>
                        <td>{{ building.apartments_count }}</td>
                        <td>
                            {% if building.status == 'planned' %}–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
                            {% elif building.status == 'building' %}–°—Ç—Ä–æ–∏—Ç—Å—è
                            {% elif building.status == 'completed' %}–°–¥–∞–Ω
                            {% endif %}
                        </td>
                        <td>
                            {% if building.materials.exists %}
                                <div class="materials-list">
                                    {% for mat in building.materials.all %}
                                        <span class="material-tag">{{ mat.name }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <span class="no-data">‚Äî</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="no-data">–ö–æ—Ä–ø—É—Å–∞ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
        {% endif %}
    </div>
    {% empty %}
    <p class="no-data">–ü—Ä–æ–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
    {% endfor %}
</div>
{% endblock %}
